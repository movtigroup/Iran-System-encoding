# کدگذاری سیستم ایران

یک بسته پایتون برای کدگذاری و رمزگشایی متن فارسی با استفاده از مجموعه کاراکتر سیستم ایران، با تشخیص خودکار محل و مدیریت عدد بر اساس زمینه زبان.

## ویژگی‌ها

- **کدگذاری/رمزگشایی دوطرفه**: تبدیل بین متن فارسی یونی‌کد و کدگذاری سیستم ایران
- **تشخیص محل**: تشخیص خودکار اینکه متن فارسی (`fa`) یا انگلیسی (`en`) است و اعداد را متناسب با آن مدیریت می‌کند
- **مدیریت هوشمندانه اعداد**: تبدیل اعداد به ارقام فارسی هنگامی که محل فارسی است، اعداد ASCII را هنگامی که محل انگلیسی است حفظ می‌کند
- **پیاده‌سازی خالص پایتون**: کاملاً در پایتون پیاده‌سازی شده و بدون وابستگی‌های خارجی (پشتیبانی گسترده C حذف شده برای سادگی)
- **رابط خط فرمان**: رابط کاربری خط فرمان آسان برای عملیات کدگذاری/رمزگشایی
- **الگوریتم دقیق**: پیاده‌سازی دقیق همان منطق کد C اصلی برای کدگذاری سیستم ایران

## نصب

```bash
pip install -r requirements.txt
```

## نحوه استفاده

### رابط برنامه‌نویسی پایتون

```python
from iran_encoding import encode, decode, detect_locale

# تشخیص محل (fa/en)
locale = detect_locale("Hello world سلام")
print(locale)  # خروجی: 'fa' (چون کاراکترهای فارسی بیشتر است)

# کدگذاری متن فارسی
text = "سلام 123"
encoded = encode(text)
print(encoded.hex())  # بایت‌های کدگذاری شده سیستم ایران به صورت هگز

# رمزگشایی بایت‌های سیستم ایران
decoded = decode(encoded)
print(decoded)  # خروجی: "سلام ۱۲۳" (با ارقام فارسی)

# کدگذاری با چیدمان منطقی (به جای چیدمان دیداری)
encoded_logical = encode(text, visual_ordering=False)
```

### رابط خط فرمان

```bash
# کدگذاری متن
iran-encoding encode "سلام دنیا"

# رمزگشایی رشته هگز
iran-encoding decode-hex "a8 f3 91 f4"

# رمزگشایی رشته بایت
iran-encoding decode "b'\\xa8\\xf3\\x91\\xf4'"
```

## تشخیص محل

بسته شامل تشخیص هوشمند محل است که تعیین می‌کند آیا متن ورودی عمدتاً فارسی (`fa`) یا انگلیسی (`en`) است. بر اساس این تشخیص:

- **محل فارسی (`fa`)**: اعداد به ارقام فارسی تبدیل می‌شوند (0123456789 → ۰۱۲۳۴۵۶۷۸۹)
- **محل انگلیسی (`en`)**: اعداد به عنوان ارقام ASCII باقی می‌مانند

مثال:
```python
from iran_encoding import encode

# متن با محل فارسی - اعداد به فارسی تبدیل می‌شوند
text_fa = "Hello سلام 123"
encoded_fa = encode(text_fa)
# اعداد '123' به عنوان ارقام فارسی '۱۲۳' کدگذاری می‌شوند

# متن با محل انگلیسی - اعداد ASCII باقی می‌مانند
text_en = "فقط متن انگلیسی اینجا 123"
encoded_en = encode(text_en)
# اعداد '123' به صورت ASCII باقی می‌مانند
```

## کدگذاری سیستم ایران

سیستم ایران یک کدگذاری کاراکتر فارسی قدیمی است که قبل از یونی‌کد وجود داشت. این بسته فراهم می‌کند:

- نگاشت کامل کاراکتر برای متن فارسی
- پشتیبانی از اعداد فارسی (۰۱۲۳۴۵۶۷۸۹)
- کاراکترهای طراحی جعبه و سایر نمادها
- مدیریت صحیح حروف به هم پیوسته و غیرپیوسته عربی/فارسی
- پیاده‌سازی دقیق همان الگوریتم کد C اصلی

## تست

اجرای مجموعه تست:

```bash
python -m pytest tests/
```

یا اجرای تست‌های فردی:

```bash
python -m tests.test_converter
python -m tests.test_encoding_functions
```

## مجوز

مجوز MIT - برای جزئیات فایل [LICENSE](LICENSE) را ببینید.

## مشارکت

مشارکت‌ها خوش‌آمد است! لطفاً رأی دهید یا یک درخواست ادغام ارسال کنید.